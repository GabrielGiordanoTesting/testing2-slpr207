#!/usr/bin/env ruby
# frozen_string_literal: true

load File.expand_path("../with_rubygems", __FILE__)

require "rubygems"

bundler_spec = Gem::Specification.load(File.expand_path("../../bundler.gemspec", __FILE__))
rspec = bundler_spec.development_dependencies.find {|d| d.name == "rspec" }
rspec_requirement = rspec.requirement.to_s

begin
  gem "rspec", rspec_requirement
  Gem.finish_resolve if Gem.respond_to?(:finish_resolve)

  load Gem.bin_path("rspec-core", "rspec")
rescue Gem::LoadError
  $stderr.puts "We couln't activate rspec (#{rspec_requirement}). Try `gem install rspec:'#{rspec_requirement}'`"
end
